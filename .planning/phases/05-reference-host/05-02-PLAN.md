# Phase 5 Plan 2: Clean Up Test Hosts & Document Pattern

## Context

After migrating ghost, clean up the test hosts (malphas, minimaltest, roletest) and document the minimal host pattern for future reference.

## Tasks

### 1. Clean up malphas
- [ ] Remove fixture secrets override
- [ ] Set appropriate role (vm since it's QEMU)
- [ ] Ensure proper secrets setup or set hasSecrets = false

### 2. Review minimaltest/roletest
- [ ] Verify they use role system correctly
- [ ] Clean up any outdated patterns
- [ ] Consider consolidating test hosts if redundant

### 3. Verify all hosts build
- [ ] `nix flake check` or build all hosts
- [ ] Fix any evaluation errors

### 4. Document minimal host pattern
- [ ] Update docs/addnewhost.md with examples
- [ ] Add inline comments to genoa as reference

## Success Criteria

- All hosts in hosts/nixos/ evaluate successfully
- No test hosts using deprecated patterns
- Clear documentation for adding new hosts

## Files to Modify

- `hosts/nixos/malphas/default.nix` - Clean up
- `hosts/nixos/minimaltest/default.nix` - Review
- `hosts/nixos/roletest/default.nix` - Review
- `docs/addnewhost.md` - Add examples
