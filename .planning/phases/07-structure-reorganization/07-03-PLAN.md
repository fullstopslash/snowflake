# Plan 07-03: Rename /home/ to /home-manager/

## Objective
Rename the `/home/` directory to `/home-manager/` for clarity, and clean up the structure to only contain home-manager specific configurations.

## Context
The `/home/` directory name is ambiguous - it could be confused with the system `/home` directory. Renaming to `/home-manager/` makes it explicit this contains home-manager configurations.

## Current Structure
```
home/
├── common/
│   ├── core/              # Core HM configs (nixvim, ghostty, timers)
│   │   ├── ghostty.nix
│   │   ├── nixvim/
│   │   ├── nixos.nix
│   │   └── timers/
│   └── optional/          # Optional HM configs
├── media/                 # media user HM config
│   └── common/
├── rain/                  # rain user HM config
│   └── common/
└── ta/                    # ta user (to be deleted in 07-01)
    └── common/
```

## Target Structure
```
home-manager/
├── common/
│   ├── core/              # Essential HM-only configs
│   │   ├── nixvim/        # Editor config (HM-specific)
│   │   └── timers/        # User timers
│   └── optional/          # Optional HM-only configs
├── users/
│   ├── rain/              # rain-specific HM overrides
│   └── media/             # media-specific HM overrides
└── default.nix            # Module index
```

## Steps

1. **Rename directory**
   ```bash
   git mv home home-manager
   ```

2. **Update all imports in flake.nix**
   - Change `./home/` paths to `./home-manager/`

3. **Update user directory structure**
   - Move `home-manager/rain/` to `home-manager/users/rain/`
   - Move `home-manager/media/` to `home-manager/users/media/`
   - (ta already removed in 07-01)

4. **Update internal imports**
   - Fix any relative paths within home-manager configs

5. **Audit what should move to NixOS**
   - `ghostty.nix` - can this be system-wide?
   - Identify configs that don't need HM

6. **Verify build**
   ```bash
   nix flake check
   nh os build
   ```

## Files to Update

### flake.nix
- All `homeConfigurations` paths
- Any imports referencing `./home/`

### Host configs
- Any imports like `../../home/common/`

### Internal home-manager files
- Relative imports between HM configs

## Verification
- [ ] Directory renamed to `home-manager/`
- [ ] No references to old `home/` path
- [ ] All HM configurations still work
- [ ] `nix flake check` passes
- [ ] `nh os build` succeeds

## Risk
Medium - path changes affect many files. Careful search/replace needed.
